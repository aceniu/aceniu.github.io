<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Zabbix 6.0 学习笔记 | 艾斯牛 Blog</title><meta name="author" content="aceniu,123354319@qq.com"><meta name="copyright" content="aceniu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Zabbix 是一个基于 WEB 界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。Zabbix能监视各种网络参数,保证服务器系统的安全运营;并提供灵活的通知机制以让系统管理员快速定位、解决存在的各种问题。"><meta property="og:type" content="article"><meta property="og:title" content="Zabbix 6.0 学习笔记"><meta property="og:url" content="https://blog.halfsummer.xyz/posts/c1031b26.html"><meta property="og:site_name" content="艾斯牛 Blog"><meta property="og:description" content="Zabbix 是一个基于 WEB 界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。Zabbix能监视各种网络参数,保证服务器系统的安全运营;并提供灵活的通知机制以让系统管理员快速定位、解决存在的各种问题。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e8a6408cf8b.png"><meta property="article:published_time" content="2023-02-12T00:44:21.000Z"><meta property="article:modified_time" content="2023-02-15T14:54:27.758Z"><meta property="article:author" content="aceniu"><meta property="article:tag" content="编程"><meta property="article:tag" content="运维"><meta property="article:tag" content="Zabbix"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e8a6408cf8b.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.halfsummer.xyz/posts/c1031b26.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#3b70fc"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/128.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"><link rel="mask-icon" href="/img/siteicon/128.png" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Zabbix 6.0 学习笔记",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-02-15 14:54:27"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="艾斯牛 Blog" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e7dea41c063.gif" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw fas fa-envelope faa-tada"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/index.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg> <span>追番</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e8a6408cf8b.png)"><nav id="nav"><span id="blog-info"><a href="/" title="艾斯牛 Blog"><span class="site-name">艾斯牛 Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw fas fa-envelope faa-tada"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/index.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg> <span>追番</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Zabbix 6.0 学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-12T00:44:21.000Z" title="发表于 2023-02-12 00:44:21">2023-02-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-15T14:54:27.758Z" title="更新于 2023-02-15 14:54:27">2023-02-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Note/">Note</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Note/Program/">Program</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Zabbix 6.0 学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><meta name="referrer" content="no-referrer"><h1 id="1）Zabbix-简介"><a href="#1）Zabbix-简介" class="headerlink" title="1）Zabbix 简介"></a>1）Zabbix 简介</h1><div class="tip home"><p><strong>Zabbix官网</strong>：<a target="_blank" rel="noopener" href="https://www.zabbix.com">https://www.zabbix.com</a></p></div><div class="tip cogs"><p><strong>Zabbix官方文档</strong>：<a target="_blank" rel="noopener" href="https://www.zabbix.com/documentation/6.0/zh/manual/installation/requirements">https://www.zabbix.com/documentation/6.0/zh/manual/installation/requirements</a></p></div><p>参考文案：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_52906737/article/details/128331225">https://blog.csdn.net/weixin_52906737/article/details/128331225</a></p><details class="folding-tag" cyan><summary>Zabbix 概述</summary><div class="content"><p>Zabbix是由Alexei Vladishev开发的一种网络监视、管理系统，基于Server-Client架构。可用于监视各种网络服务、服务器和网络机器等状态。</p><p>使用各种Database-end如MySQL, PostgresQL, sQLite, Oracle或 IBM DB2储存资料。Server端基于C语言、Web管理端frontend则是基于PHP所制作的。</p><p>Zabbix可以使用多种方式监视。可以只使用Simple Check 不需要安装Client端，亦可基于SMTP或HTTP…各种协议定制监视。</p><p>在客户端如UNIX,Windows中安装Zabbix Agent 之后，可监视 CPU Load、网络使用状况、硬盘容量等各种状态。而就算没有安装Agent 在监视对象中，Zabbix也可以经由SNMP、TCP、ICMP、利用IPMI、SSH、 telnet 对目标进行监视。</p><p>Zabbbix自带的ltem足够满足普通小公司的监控需求，对于大公司也可以设定自定义的ltem，自动生成报表，也有API可以和其他系统集成。</p></div></details><details class="folding-tag" cyan open><summary>使用 Zabbix 的优势</summary><div class="content"><ul><li><p>开源,无软件成本投入</p></li><li><p>Server 对设备性能要求低</p></li><li><p>支持设备多,自带多种监控模板</p></li><li><p>支持分布式集中管理,有自动发现功能,可以实现自动化监控</p></li><li><p>开放式接口,扩展性强,插件编写容易</p></li><li><p>当监控的 item 比较多服务器队列比较大时可以采用主动状态,被监控客户端主动 从server 端去下载需要监控的 item 然后取数据上传到 server 端。 这种方式对服务器的负载比较小。</p></li><li><p>Api 的支持,方便与其他系统结合</p></li><li><p>zabbix可以满足理想化的监控系统需求</p></li></ul></div></details><details class="folding-tag" cyan><summary>Zabbix 软件的生命周期</summary><div class="content"><p>LTS为Long Term Support的简写，zabbix将为客户提供5年的支持服务。前三年完全支持与后两年有限制支持。前三年包括一般、关键、安全性问题解决，后两年包括关键、安全性问题解决。超出时间不提供技术支持服务。然而标准版，只提供6+1月支持。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230213111630296.png" alt="image-20230213111630296"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230213111643162.png" alt="image-20230213111643162"></p></div></details><hr><h1 id="2）Zabbix-架构"><a href="#2）Zabbix-架构" class="headerlink" title="2）Zabbix 架构"></a>2）Zabbix 架构</h1><details class="folding-tag" cyan><summary>Zabbix 监控方式</summary><div class="content"><ol><li><p><strong>被动监控</strong><br>被动检测：相对于agent而言；agent, server向agent请求获取配置的各监控项相关的数据，agent接收请求、获取数据并响应给server；</p></li><li><p><strong>主动监控</strong><br>主动检测：相对于agent而言；agent(active),agent向server请求与自己相关监控项配置，主动地将server配置的监控项相关的数据发送给server；主动监控能极大节约监控server 的资源。</p></li></ol></div></details><details class="folding-tag" cyan open><summary>Zabbix 可监控对象</summary><div class="content"><ul><li>数据库： MySQL,MariaDB,Oracle,SQL Server agent</li><li>应用软件：Nginx,Apache,PHP,Tomcat agent</li><li>集群： LVS,Keepalived,HAproxy,RHCS,F5 agent</li><li>虚拟化： VMware,KVM,XEN ,docker,k8s agent</li><li>操作系统：Linux,Unix,Windows性能参数 agent</li><li>硬件： 服务器，存储，网络设备 IPMI IPMI</li><li>网络： 网络环境（内网环境，外网环境） SNMP</li></ul></div></details><details class="folding-tag" cyan><summary>Zabbix 监控架构</summary><div class="content"><blockquote><ul><li>Zabbix是一个CS(服务端/客户端)架构的服务.</li><li>zabbix监控架构<br>Zabbix-Agent获取数据 —发送给 —&gt;Zabbix-Server服务端 —&gt;数据会被存放 —数据库 &lt;—Zabbix Web 页面展示数据</li><li>采集数据—&gt; 数据收集，数据分析，报警 —&gt;存储 —&gt;友好的展示</li></ul></blockquote><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230213111546778.png" alt="image-20230213111546778"></p><ol><li><p><strong>zabbix sever</strong><br>Zabbix server 是 agent 程序报告系统可用性、系统完整性和统计数据的核心组件，是所有配置信息、统计信息和操作数据的核心存储器。</p></li><li><p><strong>zabbix数据库存储</strong><br>所有配置信息和 Zabbix 收集到的数据都被存储在数据库中。</p></li><li><p><strong>Zabbix Web 界面</strong><br>为了从任何地方和任何平台都可以轻松的访问Zabbix, 我们提供基于Web的Zabbix界面。该界面是Zabbix Server的一部分，通常(但不一定)跟Zabbix Server运行在同一台物理机器上。</p><p>如果使用 SQLite,Zabbix Web 界面必须要跟Zabbix Server运行在同一台物理机器上。</p></li><li><p><strong>Zabbix Proxy 代理服务器</strong><br>Zabbix proxy 可以替Zabbix Server收集性能和可用性数据。Proxy代理服务器是Zabbix软件可选择部署的一部分；当然，Proxy代理服务器可以帮助单台Zabbix Server分担负载压力。</p></li><li><p><strong>Zabbix Agent 监控代理</strong><br>Zabbix agents监控代理 部署在监控目标上，能够主动监控本地资源和应用程序，并将收集到的数据报告给Zabbix Server。</p></li><li><p><strong>Zabbix 数据流</strong><br>监控方面，为了创建一个监控项(item)用于采集数据，必须先创建一个主机（host）。</p><p>告警方面，在监控项里创建触发器（trigger），通过触发器（trigger）来触发告警动作（action）。 因此，如果你想收到Server XCPU负载过高的告警，必须满足：</p><ul><li>为Server X创建一个host并关联一个用于对CPU进行监控的监控项（Item）。</li><li>创建一个Trigger，设置成当CPU负载过高时会触发</li><li>Trigger被触发，发送告警邮件</li></ul></li></ol></div></details><hr><h1 id="3）监控的生命周期"><a href="#3）监控的生命周期" class="headerlink" title="3）监控的生命周期"></a>3）监控的生命周期</h1><details class="folding-tag" cyan><summary>生命周期</summary><div class="content"><ol><li>服务器上架机柜</li><li><p>进行基础设施的监控</p><ul><li>服务器温度，风扇转速（ipmitool命令对服务器进行远程管理，注意只能用在物理机，VMware不行）</li><li>存储的容量，性能（df，fdisk，dd，iotop）</li><li>CPU性能（Iscpu，uptime，top，htop，glances）</li><li>内存（free）</li><li>网络情况（iftop，nethogs）</li></ul></li><li><p>应用监控</p><ul><li>数据库mysql，redis</li><li>nginx</li><li>php-fmp</li><li>python</li></ul></li><li>注意：若是服务器在维护中，还得暂停监控指标，否则监控会不停报警。</li><li>监控系统在运维自动化系统中，实现如下功能<ul><li>监控数据收集，可视化展示（图标展示，柱状图，曲线图，折线图）</li><li>异常数据报警</li><li>结合CMDB等系统协同工作</li></ul></li></ol></div></details><hr><h1 id="4）主机规划"><a href="#4）主机规划" class="headerlink" title="4）主机规划"></a>4）主机规划</h1><h2 id="4-1-推荐配置"><a href="#4-1-推荐配置" class="headerlink" title="4.1 推荐配置"></a>4.1 推荐配置</h2><details class="folding-tag" cyan><summary>下表提供了几个硬件配置参考</summary><div class="content"><p><table><colgroup><col style="width:22%"><col style="width:4%"><col style="width:38%"><col style="width:33%"><col style="width:1%"></colgroup><thead><tr class="header"><th>规模 平</th><th>CPU</th><th>内存 数据库</th><th colspan="2">受监控的主机数量</th></tr></thead><tbody><tr class="odd"><td><em>小型</em> C</td><td>ntOS V</td><td>rtual Appliance M</td><td>SQL InnoDB 1</td><td>0</td></tr><tr class="even"><td><em>中型</em> C</td><td>ntOS 2</td><td>CPU cores/2GB M</td><td>SQL InnoDB 5</td><td>0</td></tr><tr class="odd"><td><em>大型</em> R</td><td>dHat Enterprise Linux 4</td><td>CPU cores/8GB R</td><td>ID10 MySQL InnoDB 或 PostgreSQL &amp;g</td><td>;1000</td></tr><tr class="even"><td><em>极大型</em> Re</td><td>Hat Enterprise Linux 8</td><td>PU cores/16GB Fa</td><td>t RAID10 MySQL InnoDB 或 PostgreSQL &amp;gt</td><td>10000</td></tr></tbody></table></p><blockquote><p>实际上，Zabbix 环境的配置非常依赖于监控项（主动）和更新间隔。 如果是进行大规模部署，强烈建议将数据库独立部署。</p></blockquote></div></details><details class="folding-tag" cyan><summary>内存、磁盘、CPU等</summary><div class="content"><p><strong>内存和磁盘</strong></p><p>Zabbix 运行需要物理内存和磁盘空间。如果刚接触 Zabbix，128 MB 的物理内存和 256 MB 的可用磁盘空间可能是一个很好的起点。 然而，所需的内存和磁盘空间显然取决于被监控的主机数量和配置参数。 如果您计划调整参数以保留较长的历史数据，那么您应该考虑至少有几 GB 磁盘空间，以便有足够的磁盘空间将历史数据存储在数据库中。</p><p>每个 Zabbix 守护程序进程都需要与数据库服务器建立多个连接。 为连接分配的内存量取决于数据库引擎的配置。</p><blockquote><p>拥有的物理内存越多，数据库（以及 Zabbix ）的工作速度就越快！</p></blockquote><p><strong>CPU</strong></p><p>Zabbix，尤其是 Zabbix 数据库可能需要大量 CPU 资源，该具体取决于被监控参数的数量和所选的数据库引擎。</p><p><strong>其他硬件</strong></p><p>如果需要启用短信（SMS）通知功能，需要串行通讯口（serial communication port）和串行GSM调制解调器（serial GSM modem）。USB转串行转接器也同样可以工作。</p></div></details><h2 id="4-2-容量估算"><a href="#4-2-容量估算" class="headerlink" title="4.2 容量估算"></a>4.2 容量估算</h2><details class="folding-tag" cyan><summary>磁盘容量计算</summary><div class="content"><div class="table-container"><table><thead><tr><th>参数</th><th>所需磁盘空间的计算公式 （单位：字节</th></tr></thead><tbody><tr><td>Zabbix 配置文件</td><td>固定大小。通常为10MB或者更少。</td></tr><tr><td>History（历史数据）</td><td>days(items/refresh rate)243600bytes items：监控项数量。 days：保留历史数据的天数。 refresh rate：监控项的更新间隔。 bytes：保留单个值所需要占用的字节数，依赖于数据库引擎，通常为 ~90 字节。</td></tr><tr><td>Trends(趋势数据)</td><td>days(items/3600)243600bytes items：监控项数量。 days：保留历史数据的天数。 bytes：保留单个趋势数据所需要占用的字节数，依赖于数据库引擎，通常为 ~90 字节。</td></tr><tr><td>Events(事件数据)</td><td>daysevents243600bytes events：每秒产生的事件数量。假设最糟糕的情况下，每秒产生 1 个事件。 days：保留历史数据的天数。 bytes：保留单个趋势数据所需的字节数，取决于数据库引擎，通常为 ~170 字节。</td></tr></tbody></table></div></div></details><hr><h1 id="5）部署"><a href="#5）部署" class="headerlink" title="5）部署"></a>5）部署</h1><h2 id="5-1-本篇内容的主机规划"><a href="#5-1-本篇内容的主机规划" class="headerlink" title="5.1 本篇内容的主机规划"></a>5.1 本篇内容的主机规划</h2><div class="tip warning faa-horizontal animated-hover"><p>:warning:注意！CentOS 7.x 不支持 yum 方式安装 Zabbix 服务端。</p></div><ul><li><p><strong>安装方式：</strong></p><ul><li><emp>Zabbix **服务端编译安装**</emp></li><li>Zabbix 客户端 yum 安装</li></ul></li><li><p><strong>规划</strong></p><table id="guihua" border="1"><tr><th>角色</th><th>主机名</th><th>eth0/eth1</th><th>配置</th></tr><tr><td>Zabbix服务器</td><td>docker01</td><td>10.0.0.111</td><td>1C2G</td></tr><tr><td>Zabbix客户端</td><td>web01</td><td>10.0.0.116</td><td>1C1G</td></tr><tr><td>Zabbix客户端</td><td>db01</td><td>10.0.0.117</td><td>1C1G</td></tr><tr><td>Zabbix客户端</td><td>nfs01</td><td>10.0.0.118</td><td></td></tr></table></li></ul><h2 id="5-2-部署-Zabbix-流程"><a href="#5-2-部署-Zabbix-流程" class="headerlink" title="5.2 部署 Zabbix 流程"></a>5.2 部署 Zabbix 流程</h2><details class="folding-tag" cyan><summary>因为有些APP配置需要特别的设置，所以需要重新整理。</summary><div class="content"><p>:one: 部署 nginx</p><p>:two: 部署 php 环境</p><p>:three: 部署数据库 mariadb 10.5（Mysql 7.6）及以上 然后进行配置</p><p>:four: 编译安装 zabbix-server 服务端及后续配置</p><p>:five: 部署前端代码进行访问</p><p>:six: web访问</p><p>:seven: 配置客户端</p></div></details><h2 id="5-3-部署-nginx"><a href="#5-3-部署-nginx" class="headerlink" title="5.3 部署 nginx"></a>5.3 部署 nginx</h2><details class="folding-tag" cyan><summary>安装、检测</summary><div class="content"><p>:one:<strong>更改或新增 nginx 源</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/nginx.repo</span><br><span class="line"></span><br><span class="line">[nginx-stable]</span><br><span class="line">name=nginx stable repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br><span class="line">module_hotfixes=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p>:two:<strong>安装 nginx</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nginx</span><br></pre></td></tr></table></figure><p>:three:<strong>启动 nginx</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><p>:four:<strong>检查</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | egrep <span class="string">&#x27;nginx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#nginx-1.22.1-1.el7.ngx.x86_64</span></span><br></pre></td></tr></table></figure><blockquote><p>结果为：</p><p>nginx-1.22.1-1.el7.ngx.x86_64</p></blockquote></div></details><details class="folding-tag" yellow open><summary>配置</summary><div class="content"><p>修改配置来连通 php。</p><p>:five:<strong>配置</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /mydata/www/zabbix</span><br><span class="line">vim /etc/nginx/conf.d/zabbix-php.conf</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">    server_name zbx.aceniu.com;</span><br><span class="line">    root /mydata/www/zabbix;</span><br><span class="line">    location / &#123;</span><br><span class="line">		index index.php;</span><br><span class="line">	&#125;</span><br><span class="line">	location ~ \.php$ &#123;</span><br><span class="line">		fastcgi_pass  127.0.0.1:9000;</span><br><span class="line">		fastcgi_index index.php;</span><br><span class="line">		fastcgi_param SCRIPT_FILENAME  $document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">		include fastcgi_params;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note info modern"><p>修改 Windows 配置<code>hosts</code>解析,后面测试用。</p></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230214213847613.png" alt="image-20230214213847613"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加</span></span><br><span class="line">10.0.0.111	zbx.aceniu.com	<span class="comment"># zabbix web</span></span><br></pre></td></tr></table></figure></div></details><h2 id="5-4-部署-php-环境"><a href="#5-4-部署-php-环境" class="headerlink" title="5.4 部署 php 环境"></a>5.4 部署 php 环境</h2><details class="folding-tag" yellow open><summary>php 7.2 部署</summary><div class="content"><p>:one:<strong>安装依赖</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更换阿里云源(一般都换过了)</span></span><br><span class="line"><span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo http:mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># webtatic 要求</span></span><br><span class="line">yum -y install epel-release.noarch</span><br><span class="line"></span><br><span class="line">curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line"><span class="comment">#webtatic源</span></span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm  </span><br><span class="line"></span><br><span class="line">yum -y install php72w-cli php72w-fpm php72w-gd php72w-mbstring php72w-bcmath php72w-xml php72w-ldap php72w-mysqlnd</span><br></pre></td></tr></table></figure><p>:two:<strong>检查结果</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | egrep <span class="string">&#x27;php&#x27;</span></span><br><span class="line"></span><br><span class="line">rpm -qa | egrep <span class="string">&#x27;php|nginx&#x27;</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure><blockquote><p>结果①:<br>php72w-common-7.2.34-1.w7.x86_64<br>php72w-fpm-7.2.34-1.w7.x86_64<br>php72w-mbstring-7.2.34-1.w7.x86_64<br>php72w-mysqlnd-7.2.34-1.w7.x86_64<br>php72w-cli-7.2.34-1.w7.x86_64<br>php72w-ldap-7.2.34-1.w7.x86_64<br>php72w-xml-7.2.34-1.w7.x86_64<br>php72w-pdo-7.2.34-1.w7.x86_64<br>php72w-gd-7.2.34-1.w7.x86_64<br>php72w-bcmath-7.2.34-1.w7.x86_64</p><p>结果②：<br>11</p></blockquote><p>:three:<strong>配置</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sed -ri  <span class="string">&#x27;/^(user|group)/s#apache#nginx#g&#x27;</span> /etc/php-fpm.d/www.conf</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">vim /etc/php-fpm.d/www.conf</span><br><span class="line"></span><br><span class="line">egrep <span class="string">&#x27;^(user|group)&#x27;</span> /etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure><blockquote><p>结果为：</p><p>user = nginx</p><p>group = nginx</p></blockquote><p>创建测试文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /mydata/www/zabbix/info.php</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>:four:<strong>启动、测试</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> php-fpm</span><br><span class="line">systemctl start php-fpm</span><br></pre></td></tr></table></figure><p>测试：直接用地址访问 <code>zbx.aceniu.com/info.php</code></p><p></p><details class="folding-tag" red><summary>404 Not Found</summary><div class="content"><p>在虚拟机上安装成功 Nginx 和 PHP，并配置完成后，发现访问域名出现 404。</p><p>:one:<strong>防火墙功能未关闭，先关闭防火墙</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><p>:two:<strong>关闭 SELinux</strong></p><ul><li><p><strong>永久关闭</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config </span><br><span class="line"> </span><br><span class="line"><span class="comment"># This file controls the state of SELinux on the system.</span></span><br><span class="line"><span class="comment"># SELINUX= can take one of these three values:</span></span><br><span class="line"><span class="comment">#     enforcing - SELinux security policy is enforced.</span></span><br><span class="line"><span class="comment">#     permissive - SELinux prints warnings instead of enforcing.</span></span><br><span class="line"><span class="comment">#     disabled - No SELinux policy is loaded.</span></span><br><span class="line"><span class="comment"># 开启状态</span></span><br><span class="line"><span class="comment">#SELINUX=enforcing</span></span><br><span class="line"><span class="comment"># 设置为禁用状态</span></span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment"># SELINUXTYPE= can take one of three values:</span></span><br><span class="line"><span class="comment">#     targeted - Targeted processes are protected,</span></span><br><span class="line"><span class="comment">#     minimum - Modification of targeted policy. Only selected processes are protected. </span></span><br><span class="line"><span class="comment">#     mls - Multi Level Security protection.</span></span><br><span class="line">SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure></li><li><p><strong>临时关闭</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0</span><br></pre></td></tr></table></figure></li><li><p><strong>查看selinux的状态，都为禁用状态</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7]<span class="comment"># getenforce </span></span><br><span class="line">Disabled </span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">[root@centos7~]<span class="comment"># sestatus</span></span><br><span class="line">SELinux status:                 disabled</span><br></pre></td></tr></table></figure></li></ul></div></details><p></p><p>访问页面，成功。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230214223704242.png" alt="image-20230214223704242"></p></div></details><h2 id="5-5-部署数据库"><a href="#5-5-部署数据库" class="headerlink" title="5.5 部署数据库"></a>5.5 部署数据库</h2><details class="folding-tag" red><summary>Zabbix 6.0 LTS 支持的数据库引擎及版本</summary><div class="content"><p>你可能已经发现了，我们增加了 Zabbix 后端数据库的版本要求。这样做的原因是 Zabbix 利用了这些新版本数据库提供的特性，从而确保 Zabbix 的最佳性能。如果使用不受支持的数据库版本，Zabbix 将不会启动。有一个配置参数可以解决这种问题，但是不建议这样做，因为无法确保 Zabbix 会不会遇到性能问题或者崩溃。在迁移到 Zabbix 6.0 LTS 之前，应该首先将数据库升级到支持的版本。</p><ul><li>MySQL/Percona 8.0.x</li><li>MariaDB 10.5.0 -10.6.x</li><li>PostgreSQL 13.x</li><li>Oracle 19c – 21c</li></ul></div></details><div class="tabs" id="database"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#database-1">MySQL</button></li><li class="tab active"><button type="button" data-href="#database-2">Mariadb</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="database-1"><p class="p center gray ultra">Buliding...</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="database-2"><div class="tip warning faa-horizontal animated-hover"><p>:warning:注意！Zabbix 6.0 LTS 不支持默认源中的 mariadb 5.5</p></div><details class="folding-tag" cyan><summary>安装 Mariadb 10.5</summary><div class="content"><p>:one:<strong>更改或新增 mariadb 源</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/mariadb.repo</span><br><span class="line"></span><br><span class="line">[mariadb]</span><br><span class="line">name = MariaDB</span><br><span class="line">baseurl = http://mirrors.aliyun.com/mariadb/yum/10.5/centos7-amd64/</span><br><span class="line">gpgkey = http://mirrors.aliyun.com/mariadb/yum/RPM-GPGKEY-MariaDB</span><br><span class="line">gpgcheck = 1</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><p>:two:<strong>安装 mariadb</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mariadb-server</span><br></pre></td></tr></table></figure><details class="folding-tag" red><summary>GPG 密钥失败：[Errno 14]</summary><div class="content"><p>错误信息：</p><blockquote><p>从 <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/mariadb/yum/RPM-GPGKEY-MariaDB">http://mirrors.aliyun.com/mariadb/yum/RPM-GPGKEY-MariaDB</a> 检索密钥<br>获取 GPG 密钥失败：[Errno 14] HTTP Error 404 - Not Found</p></blockquote><p>如果不行在添加参数 <code>--nogpgcheck</code> 解决</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mariadb-server --nogpgcheck</span><br></pre></td></tr></table></figure></div></details><p>:three:<strong>启动 mariadb</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> mariadb</span><br><span class="line">systemctl start mariadb</span><br></pre></td></tr></table></figure><p>:four:<strong>检查</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep -i mariadb</span><br></pre></td></tr></table></figure><blockquote><p>结果为：</p><p>MariaDB-compat-10.5.16-1.el7.centos.x86_64<br>MariaDB-common-10.5.16-1.el7.centos.x86_64<br>MariaDB-server-10.5.16-1.el7.centos.x86_64<br>MariaDB-client-10.5.16-1.el7.centos.x86_64</p></blockquote></div></details><details class="folding-tag" red open><summary>数据库初始化</summary><div class="content"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><blockquote><p>Enter current password for root (enter for none): # 回车 （输入默认密码，没有）</p><p>Switch to unix_socket authentication [Y/n] n # :warning: 注意此处要选择 <code>n</code>（unix的连接方式</p><p>Change the root password? [Y/n] Y # 修改root密码<br>New password: # 新密码<br>Re-enter new password: # 确认密码<br>Password updated successfully!<br>Reloading privilege tables..<br>… Success!</p><p>Remove anonymous users? [Y/n] # 默认为Y<br>… Success!</p><p>Disallow root login remotely? [Y/n] # 默认为Y<br>… Success!</p><p>Remove test database and access to it? [Y/n] # 默认为Y</p><ul><li>Dropping test database…<br>… Success!</li><li>Removing privileges on test database…<br>… Success!</li></ul><p>Reload privilege tables now? [Y/n] # 默认为Y<br>… Success!</p><p>Thanks for using MariaDB!</p></blockquote></div></details><details class="folding-tag" red open><summary>创建库和用户</summary><div class="content"><p>:one:<strong>进入数据库</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p123456</span><br></pre></td></tr></table></figure><p>:two:<strong>创建 库、用户</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 创建数据库要指定字符集</span><br><span class="line">create database zabbix charset utf8 collate utf8_bin;</span><br><span class="line"></span><br><span class="line">2. 创建zabbix用户</span><br><span class="line">grant all on zabbix.* to &#x27;zabbix&#x27;@&#x27;localhost&#x27; identified by &#x27;zabbix&#x27;;</span><br><span class="line"></span><br><span class="line">#如果生产环境数据库与zbx,php不在同一台主机上，则改成内网ip最后一位用%表示所有</span><br><span class="line">#grant all on zabbix.* to &#x27;zabbix&#x27;@&#x27;172.16.1.%&#x27; identified by &#x27;zabbix&#x27; ;</span><br></pre></td></tr></table></figure></div></details><details class="folding-tag" red open><summary>导入表和数据</summary><div class="content"><p class="p gray large">下载 Zabbix 6 LTS 源码包</p><p>:one:<strong>官网下载 Zabbix 6 LTS 源码</strong>：<span class="p gray">直接使用方法2即可</span></p><p>官网下载： <a target="_blank" rel="noopener" href="https://www.zabbix.com/cn/download">https://www.zabbix.com/cn/download</a></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230215020522224.png" alt="image-20230215020522224"></p><p>上传到 centos7。</p><p>:two:<strong>wget下载</strong>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#或者（推荐）</span></span><br><span class="line">wget https://cdn.zabbix.com/zabbix/sources/stable/6.0/zabbix-6.0.13.tar.gz</span><br></pre></td></tr></table></figure><p class="p gray large">导入表和数据</p><p>:one:<strong>解压、查看需要导包的文件</strong>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar xzvf zabbix-6.0.13.tar.gz -C /usr/local</span><br><span class="line">ll /usr/local/zabbix-6.0.13/database/mysql/</span><br></pre></td></tr></table></figure><blockquote><p>-rw-r—r—. 1 1000 1000 35413900 2月 1 15:20 data.sql # 数据<br>-rw-r—r—. 1 1000 1000 282 1月 23 16:33 double.sql<br>-rw-r—r—. 1 1000 1000 1527 2月 1 15:20 history_pk_prepare.sql<br>-rw-r—r—. 1 1000 1000 1978341 1月 23 16:33 images.sql<br>-rw-r—r—. 1 1000 1000 715 2月 1 15:19 Makefile.am<br>-rw-r—r—. 1 1000 1000 16572 2月 1 15:20 Makefile.in<br>-rw-r—r—. 1 1000 1000 164688 2月 1 15:20 schema.sql # 创建表结构</p></blockquote><p>:two:<strong>导入</strong>（<span class="p green">尽量使用推荐顺序导入，如果重复导入建议删除zabbix库后重新尝试</span>）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/zabbix-6.0.13/database/mysql/</span><br><span class="line">mysql -uroot -pQweasz123456 zabbix &lt;schema.sql</span><br><span class="line">mysql -uroot -pQweasz123456 zabbix &lt;images.sql</span><br><span class="line">mysql -uroot -pQweasz123456 zabbix &lt;data.sql</span><br><span class="line">mysql -uroot -pQweasz123456 zabbix &lt;double.sql</span><br><span class="line">mysql -uroot -pQweasz123456 zabbix &lt;history_pk_prepare.sql</span><br></pre></td></tr></table></figure></div></details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="5-6-部署-zabbix-server-服务端"><a href="#5-6-部署-zabbix-server-服务端" class="headerlink" title="5.6 部署 zabbix-server 服务端"></a>5.6 部署 zabbix-server 服务端</h2><details class="folding-tag" red open><summary>编译安装 zabbix-server 服务端</summary><div class="content"><p>:one:安装依赖</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mysql-devel pcre-devel openssl-devel zlib-devel libxml2-devel net-snmp-devel net-snmp libssh2-devel OpenIPMI-devel libevent-devel openldap-devel libcurl-devel --nogpgcheck</span><br></pre></td></tr></table></figure><p>:two:将解压后的 zabbix 文件夹移动至：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> zabbix-6.0.13 /usr/local/</span><br><span class="line"><span class="built_in">cd</span> /usr/local/zabbix-6.0.13</span><br></pre></td></tr></table></figure><p>:three:编译安装</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">./configure	--sysconfdir=/etc/zabbix/  \</span><br><span class="line">--enable-server  \</span><br><span class="line">--with-mysql  \</span><br><span class="line">--with-net-snmp  \</span><br><span class="line">--with-libxml2  \</span><br><span class="line">--with-ssh2  \</span><br><span class="line">--with-openipmi  \</span><br><span class="line">--with-zlib  \</span><br><span class="line">--with-libpthread  \</span><br><span class="line">--with-libevent  \</span><br><span class="line">--with-openssl  \</span><br><span class="line">--with-ldap  \</span><br><span class="line">--with-libcurl  \</span><br><span class="line">--with-libpcre</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><blockquote><p><code>./configure</code> #默认安装到/usr/local/下</p><p><code>--sysconfdir=/etc/zabbix/</code> #指定配置文件安装目录</p><p><code>--enable-server</code> #安装的是服务端</p><p><code>--with-mysql</code> #开启对mysql数据库的支持</p><p>​ # 依赖与功能</p><p><code>--with-net-snmp</code></p><p><code>--with-libxml2</code></p><p><code>--with-ssh2</code></p><p><code>--with-openipmi</code></p><p><code>--with-zlib</code></p><p><code>--with-libpthread</code></p><p><code>--with-libevent</code></p><p><code>--with-openssl</code></p><p><code>--with-ldap</code></p><p><code>--with-libcurl</code></p><p><code>--with-libpcre</code></p></blockquote><p></p><details class="folding-tag" red><summary>`make install`时发生错误</summary><div class="content"><p>此错误时由于gcc的版本太低造成，<strong>临时运行高版本的gcc来完成安装</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230215142023253.png" alt="image-20230215142023253"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#清除编译</span></span><br><span class="line">make clean</span><br><span class="line"></span><br><span class="line"><span class="comment">#更新步骤</span></span><br><span class="line">yum -y update</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装 SCL 发行包 centos-release-scl</span></span><br><span class="line">yum -y install centos-release-scl</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装需要的Software Collection</span></span><br><span class="line">yum -y install devtoolset-7-gcc*</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用已安装的软件集合环境</span></span><br><span class="line">scl <span class="built_in">enable</span> devtoolset-7 bash</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line"><span class="comment">#source /opt/rh/devtoolset-7/enable</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#再次执行编译安装</span></span><br></pre></td></tr></table></figure></div></details><p></p><p>:four:检验</p><p>安装成功后并没有什么提示，只能输入</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="comment">#?</span></span><br></pre></td></tr></table></figure><blockquote><p>结果为：</p><p>0</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zabbix_server --version</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/aceniu/images/raw/master/article_images/typora_images/image-20230215143421099.png" alt="image-20230215143421099"></p></div></details><details class="folding-tag" red open><summary>配置 zabbix-server 服务端</summary><div class="content"><p>:one:修改配置文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/zabbix/zabbix_server.conf</span><br><span class="line">grep -n <span class="string">&#x27;^[a-Z]&#x27;</span> /etc/zabbix/zabbix_server.conf</span><br><span class="line"></span><br><span class="line">12:ListenPort=10051</span><br><span class="line">38:LogFile=/tmp/zabbix_server.log</span><br><span class="line">87:DBHost=localhost</span><br><span class="line">99:DBName=zabbix</span><br><span class="line">115:DBUser=zabbix</span><br><span class="line">123:DBPassword=zabbix</span><br><span class="line">140:DBPort=3306</span><br><span class="line">507:Timeout=4</span><br><span class="line">593:LogSlowQueries=3000</span><br><span class="line">708:StatsAllowedIP=127.0.0.1</span><br></pre></td></tr></table></figure><p>:two:创建用户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd zabbix</span><br><span class="line">useradd -g zabbix -M -s /sbin/nologin zabbix</span><br></pre></td></tr></table></figure><p>:three:启动服务端</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zabbix_server</span><br></pre></td></tr></table></figure><p>:four:检查</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep <span class="string">&#x27;zabbix&#x27;</span></span><br><span class="line">netstat -tulnp|grep zabbix</span><br></pre></td></tr></table></figure><blockquote><p>结果①：</p><p>zabbix 2501 1 0 06:22 ? 00:00:00 zabbix_server<br>zabbix 2504 2501 0 06:22 ? 00:00:00 zabbix_server: ha manager<br>zabbix 2505 2501 0 06:22 ? 00:00:00 zabbix_server: service manager #1 [processed 0 events, updated 0 event tags, deleted 0 problems, synced 0 service updates, idle 5.006196 sec during 5.006291 sec]<br>zabbix 2506 2501 0 06:22 ? 00:00:00 zabbix_server: configuration syncer [synced configuration in 0.163344 sec, idle 60 sec]</p><p>…省略部分内容…</p><p>zabbix 2575 2501 0 06:22 ? 00:00:00 zabbix_server: trigger housekeeper [startup idle for 60 second(s)]<br>zabbix 2576 2501 0 06:22 ? 00:00:00 zabbix_server: odbc poller #1 [got 0 values in 0.000026 sec, idle 5 sec]<br>root 2933 1524 0 06:22 pts/0 00:00:00 grep —color=auto zabbix</p><p>结果②：</p><p>tcp 0 0 0.0.0.0:10051 0.0.0.0:* LISTEN 2501/zabbix_server</p></blockquote><p>:five:配置开机自启动</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/zabbix_server.service</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=Zabbix Server with MySQL DB</span><br><span class="line">After=syslog.target network.target mysqld.service</span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/usr/local/sbin/zabbix_server -f</span><br><span class="line">User=zabbix</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">pkill zabbix_server</span><br><span class="line">ps -ef|grep zabbix</span><br><span class="line">systemctl <span class="built_in">enable</span> zabbix_server</span><br><span class="line">systemctl start zabbix_server</span><br></pre></td></tr></table></figure></div></details></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="https://blog.halfsummer.xyz">aceniu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://blog.halfsummer.xyz/posts/c1031b26.html">https://blog.halfsummer.xyz/posts/c1031b26.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.halfsummer.xyz" target="_blank">艾斯牛 Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BC%96%E7%A8%8B/">编程</a><a class="post-meta__tags" href="/tags/%E8%BF%90%E7%BB%B4/">运维</a><a class="post-meta__tags" href="/tags/Zabbix/">Zabbix</a></div><div class="post_share"><div class="social-share" data-image="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e8a6408cf8b.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/ba31607c.html" title="VMware网络配置，只此一篇就够了！"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/13/63e9d01c05b00.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">VMware网络配置，只此一篇就够了！</div></div></a></div><div class="next-post pull-right"><a href="/posts/3c3cdb74.html" title="Git 学习笔记"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e8a8f5d92df.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git 学习笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/52702296.html" title="Linux 学习手册"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/13/63e915ae124a2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-10</div><div class="title">Linux 学习手册</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e7dea41c063.gif" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">aceniu</div><div class="author-info__description">Love 33 & Yilia</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/aceniu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/aceniu" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-icon_github-circle"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=123354319@qq.com" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-Rss"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/289493392" target="_blank" title="BiliBili"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=123354319&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-icon_qq-circle"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%EF%BC%89Zabbix-%E7%AE%80%E4%BB%8B"><span class="toc-text">1）Zabbix 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%EF%BC%89Zabbix-%E6%9E%B6%E6%9E%84"><span class="toc-text">2）Zabbix 架构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%EF%BC%89%E7%9B%91%E6%8E%A7%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">3）监控的生命周期</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%EF%BC%89%E4%B8%BB%E6%9C%BA%E8%A7%84%E5%88%92"><span class="toc-text">4）主机规划</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E6%8E%A8%E8%8D%90%E9%85%8D%E7%BD%AE"><span class="toc-text">4.1 推荐配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%AE%B9%E9%87%8F%E4%BC%B0%E7%AE%97"><span class="toc-text">4.2 容量估算</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5%EF%BC%89%E9%83%A8%E7%BD%B2"><span class="toc-text">5）部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E6%9C%AC%E7%AF%87%E5%86%85%E5%AE%B9%E7%9A%84%E4%B8%BB%E6%9C%BA%E8%A7%84%E5%88%92"><span class="toc-text">5.1 本篇内容的主机规划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E9%83%A8%E7%BD%B2-Zabbix-%E6%B5%81%E7%A8%8B"><span class="toc-text">5.2 部署 Zabbix 流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E9%83%A8%E7%BD%B2-nginx"><span class="toc-text">5.3 部署 nginx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E9%83%A8%E7%BD%B2-php-%E7%8E%AF%E5%A2%83"><span class="toc-text">5.4 部署 php 环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E9%83%A8%E7%BD%B2%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">5.5 部署数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-%E9%83%A8%E7%BD%B2-zabbix-server-%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-text">5.6 部署 zabbix-server 服务端</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/9fc1e5d1.html" title="Hexo 中使用 emoji 表情">Hexo 中使用 emoji 表情</a><time datetime="2023-02-15T00:05:54.000Z" title="发表于 2023-02-15 00:05:54">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1763fb9d.html" title="WMware 虚拟机安装 Linux"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/13/63e915ae124a2.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="WMware 虚拟机安装 Linux"></a><div class="content"><a class="title" href="/posts/1763fb9d.html" title="WMware 虚拟机安装 Linux">WMware 虚拟机安装 Linux</a><time datetime="2023-02-13T17:55:37.000Z" title="发表于 2023-02-13 17:55:37">2023-02-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ba31607c.html" title="VMware网络配置，只此一篇就够了！"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/13/63e9d01c05b00.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="VMware网络配置，只此一篇就够了！"></a><div class="content"><a class="title" href="/posts/ba31607c.html" title="VMware网络配置，只此一篇就够了！">VMware网络配置，只此一篇就够了！</a><time datetime="2023-02-13T12:23:06.000Z" title="发表于 2023-02-13 12:23:06">2023-02-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c1031b26.html" title="Zabbix 6.0 学习笔记"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e8a6408cf8b.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Zabbix 6.0 学习笔记"></a><div class="content"><a class="title" href="/posts/c1031b26.html" title="Zabbix 6.0 学习笔记">Zabbix 6.0 学习笔记</a><time datetime="2023-02-12T00:44:21.000Z" title="发表于 2023-02-12 00:44:21">2023-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3c3cdb74.html" title="Git 学习笔记"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img01.anzhiy.cn/useruploads/0/2023/02/12/63e8a8f5d92df.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Git 学习笔记"></a><div class="content"><a class="title" href="/posts/3c3cdb74.html" title="Git 学习笔记">Git 学习笔记</a><time datetime="2023-02-10T16:35:00.000Z" title="发表于 2023-02-10 16:35:00">2023-02-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By aceniu</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><div class="app-refresh" id="app-refresh" style="position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease"><div class="app-refresh-wrap" style="display:flex;color:#fff;height:100%;align-items:center;justify-content:center"><label>✨ 有新文章啦！ 👉</label><a href="javascript:void(0)" onclick="location.reload()"><span style="color:#fff;text-decoration:underline;cursor:pointer">🍗点击食用🍔</span></a></div></div><script>if ('serviceWorker' in navigator) {
if (navigator.serviceWorker.controller) {
navigator.serviceWorker.addEventListener('controllerchange', function() {
showNotification()
})
}
window.addEventListener('load', function() {
navigator.serviceWorker.register('/sw.js')
})
}
function showNotification() {
if (GLOBAL_CONFIG.Snackbar) {
var snackbarBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
GLOBAL_CONFIG.Snackbar.bgLight :
GLOBAL_CONFIG.Snackbar.bgDark
var snackbarPos = GLOBAL_CONFIG.Snackbar.position
Snackbar.show({
text: '✨ 有新文章啦！ 👉',
backgroundColor: snackbarBg,
duration: 500000,
pos: snackbarPos,
actionText: '🍗点击食用🍔',
actionTextColor: '#fff',
onActionClick: function(e) {
location.reload()
},
})
} else {
var showBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
'#3b70fc' :
'#1f1f1f'
var cssText = `top: 0; background: ${showBg};`
document.getElementById('app-refresh').style.cssText = cssText
}
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script async src="/js/ali_font.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("article-sort-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__slideInRight"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script></body></html>